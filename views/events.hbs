{{!-- Extending the main layout --}}
{{!-- Page Title --}}
<h1>Events</h1>

{{!-- Display flash messages --}}
{{#if messages.success}}
  <div class="flash success" style="padding: .75rem 1.5rem; margin-bottom: 1rem; background: #d4edda; color: #155724; border: 1px solid #c3e6cb; border-radius: 3px;">
    {{messages.success}}
  </div>
{{/if}}
{{#if messages.error}}
  <div class="flash error" style="padding: .75rem 1.5rem; margin-bottom: 1rem; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; border-radius: 3px;">
    {{messages.error}}
  </div>
{{/if}}

{{!-- Link to add a new event --}}
{{#if user}}
  <a href="/events/add" class="btn" style="background-color: #007bff; color: #fff; padding: .75rem 1.5rem; border-radius: 3px; text-decoration: none;">Add New Event</a>
{{/if}}

{{!-- Event List --}}
{{#if events.length}}
  <ul class="event-list" style="list-style: none; padding: 0; margin: 0;">
    {{#each events}}
      <li style="border: 1px solid #ddd; padding: 1rem; margin-bottom: 1rem; background: #fff; border-radius: 5px;">
        <h2 style="margin-top: 0;">{{title}}</h2>
        <p>{{description}}</p>
        <p>Date: {{formatDate date}}</p>
        {{#if user}}
          <a href="/events/edit/{{_id}}" class="btn" style="background-color: #007bff; color: #fff; padding: .75rem 1.5rem; border-radius: 3px; text-decoration: none;">Edit</a>
          <form action="/events/{{_id}}?_method=DELETE" method="POST" style="display: inline;">
            <button type="submit" class="btn btn-danger" style="background-color: #dc3545; color: #fff; border: none; padding: .75rem 1.5rem; border-radius: 3px; cursor: pointer;">Delete</button>
          </form>
        {{/if}}
      </li>
    {{/each}}
  </ul>
{{else}}
  <p>No events found.</p>
{{/if}}
